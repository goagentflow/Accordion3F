{"ast":null,"code":"var _jsxFileName = \"/Users/nicklinfamilymac/Desktop/Accordion3F/src/TimelineBuilder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Papa from 'papaparse';\nimport AssetSelector from './components/AssetSelector';\nimport CampaignSetup from './components/CampaignSetup';\nimport GanttChart from './components/GanttChart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimelineBuilder = () => {\n  _s();\n  // CSV and asset data\n  const [csvData, setCsvData] = useState([]);\n  const [uniqueAssets, setUniqueAssets] = useState([]);\n  // Each selected asset is now an object with a unique id, type, name, and startDate\n  const [selectedAssets, setSelectedAssets] = useState([]);\n\n  // Live date management\n  const [globalLiveDate, setGlobalLiveDate] = useState('');\n  const [useGlobalDate, setUseGlobalDate] = useState(true);\n  const [assetLiveDates, setAssetLiveDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n\n  // Calculated results\n  const [calculatedStartDates, setCalculatedStartDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n  const [projectStartDate, setProjectStartDate] = useState(''); // Earliest start date across all assets\n  const [dateErrors, setDateErrors] = useState([]); // Array of asset names that start before today\n\n  // Final timeline for display\n  const [timelineTasks, setTimelineTasks] = useState([]);\n\n  // Helper function to check if date is weekend\n  const isWeekend = date => {\n    const day = date.getDay();\n    return day === 0 || day === 6; // Sunday = 0, Saturday = 6\n  };\n\n  // Helper function to get previous working day\n  const getPreviousWorkingDay = date => {\n    let workingDate = new Date(date);\n    do {\n      workingDate.setDate(workingDate.getDate() - 1);\n    } while (isWeekend(workingDate));\n    return workingDate;\n  };\n\n  // Helper function to get next working day\n  const getNextWorkingDay = date => {\n    let workingDate = new Date(date);\n    do {\n      workingDate.setDate(workingDate.getDate() + 1);\n    } while (isWeekend(workingDate));\n    return workingDate;\n  };\n\n  // Helper function to subtract working days (backwards calculation)\n  const subtractWorkingDays = (endDate, workingDaysToSubtract) => {\n    let currentDate = new Date(endDate);\n    let remainingDays = workingDaysToSubtract;\n\n    // Subtract working days\n    while (remainingDays > 0) {\n      currentDate.setDate(currentDate.getDate() - 1);\n\n      // Only count non-weekend days\n      if (!isWeekend(currentDate)) {\n        remainingDays--;\n      }\n    }\n    return currentDate;\n  };\n\n  // Helper function to add working days (forward calculation for display)\n  const addWorkingDays = (startDate, workingDaysToAdd) => {\n    if (workingDaysToAdd <= 0) {\n      return new Date(startDate);\n    }\n    let currentDate = new Date(startDate);\n    let remainingDays = workingDaysToAdd - 1;\n    while (remainingDays > 0) {\n      currentDate.setDate(currentDate.getDate() + 1);\n      if (!isWeekend(currentDate)) {\n        remainingDays--;\n      }\n    }\n\n    // Ensure the final day is a working day\n    while (isWeekend(currentDate)) {\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    return currentDate;\n  };\n\n  // Load CSV data\n  useEffect(() => {\n    Papa.parse(`${window.location.origin}/Group_Asset_Task_Time.csv`, {\n      download: true,\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        const parsedData = results.data;\n        setCsvData(parsedData);\n\n        // Extract unique asset types from CSV\n        const assetTypes = [...new Set(parsedData.map(row => row['Asset Type']))].filter(type => type);\n        setUniqueAssets(assetTypes);\n      },\n      error: error => {\n        console.error(\"Error parsing CSV file:\", error);\n      }\n    });\n  }, []);\n\n  // Calculate backwards timeline when live dates or assets change\n  useEffect(() => {\n    if (selectedAssets.length === 0 || csvData.length === 0) {\n      setTimelineTasks([]);\n      setCalculatedStartDates({});\n      setProjectStartDate('');\n      setDateErrors([]);\n      return;\n    }\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Reset time for accurate comparison\n\n    const newCalculatedStartDates = {};\n    const newDateErrors = [];\n    const allStartDates = [];\n    const allTasks = [];\n\n    // Loop over each selected asset instance (not just type)\n    selectedAssets.forEach(asset => {\n      // asset: { id, type, name, startDate }\n      if (!asset.startDate) return; // Skip if no start date set\n\n      // Find all tasks for this asset type from the CSV\n      const assetTasks = csvData.filter(row => row['Asset Type'] === asset.type);\n      if (assetTasks.length === 0) return;\n\n      // Use the asset instance's startDate as the go-live date\n      const liveDate = new Date(asset.startDate);\n      if (isNaN(liveDate.getTime())) return;\n\n      // We'll build the tasks in reverse (from go-live backwards)\n      let currentEndDate = new Date(liveDate);\n      const ganttTasks = [];\n      let taskIndex = 0;\n\n      // Go-live task (single day)\n      ganttTasks.unshift({\n        id: `${asset.id}-go-live`,\n        name: `${asset.name}: Go-Live`,\n        // Use custom name\n        start: liveDate.toISOString().split('T')[0],\n        end: liveDate.toISOString().split('T')[0],\n        progress: 0\n      });\n      taskIndex++;\n\n      // Process all other tasks in reverse order\n      for (let i = assetTasks.length - 1; i >= 0; i--) {\n        const taskInfo = assetTasks[i];\n        const duration = parseInt(taskInfo['Duration (Days)'], 10) || 1;\n        // Subtract working days to get the start date\n        const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n        // Task ends the working day before currentEndDate\n        const taskEndDate = new Date(currentEndDate);\n        taskEndDate.setDate(taskEndDate.getDate() - 1);\n        // Ensure end date is a working day\n        let finalTaskEndDate = new Date(taskEndDate);\n        if (isWeekend(finalTaskEndDate)) {\n          finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n        }\n        ganttTasks.unshift({\n          id: `${asset.id}-task-${taskIndex}`,\n          name: `${asset.name}: ${taskInfo['Task']}`,\n          start: taskStartDate.toISOString().split('T')[0],\n          end: finalTaskEndDate.toISOString().split('T')[0],\n          progress: 0\n        });\n        taskIndex++;\n        // Update currentEndDate for the next task\n        currentEndDate = new Date(taskStartDate);\n      }\n\n      // Add all tasks for this asset instance to the main list\n      allTasks.push(...ganttTasks);\n\n      // Set the calculated start date for this asset to the start date of the first (earliest) task\n      if (ganttTasks.length > 0 && ganttTasks[0].start) {\n        newCalculatedStartDates[asset.id] = ganttTasks[0].start;\n        allStartDates.push(new Date(ganttTasks[0].start));\n      }\n\n      // Check if start date is before today\n      if (ganttTasks.length > 0 && new Date(ganttTasks[0].start) < today) {\n        newDateErrors.push(asset.name);\n      }\n    });\n\n    // Find earliest start date across all assets\n    if (allStartDates.length > 0) {\n      const earliestDate = new Date(Math.min(...allStartDates));\n      setProjectStartDate(earliestDate.toISOString().split('T')[0]);\n    }\n    setTimelineTasks(allTasks);\n    setCalculatedStartDates(newCalculatedStartDates);\n    setDateErrors(newDateErrors);\n  }, [selectedAssets, globalLiveDate, useGlobalDate, assetLiveDates, csvData]);\n  // This new useEffect pre-populates individual dates when switching from global mode\n  useEffect(() => {\n    if (!useGlobalDate && globalLiveDate && selectedAssets.length > 0) {\n      const newLiveDates = {\n        ...assetLiveDates\n      };\n      let updated = false;\n      selectedAssets.forEach(asset => {\n        // Pre-fill only if the asset doesn't have an individual date set\n        if (!newLiveDates[asset.name]) {\n          // Changed to asset.name\n          newLiveDates[asset.name] = globalLiveDate; // Changed to asset.name\n          updated = true;\n        }\n      });\n      if (updated) {\n        setAssetLiveDates(newLiveDates);\n      }\n    }\n  }, [useGlobalDate, globalLiveDate, selectedAssets, assetLiveDates]);\n\n  // Sync all asset instance startDates to globalLiveDate if useGlobalDate is true\n  useEffect(() => {\n    if (useGlobalDate && globalLiveDate) {\n      setSelectedAssets(prev => prev.map(asset => asset.startDate !== globalLiveDate ? {\n        ...asset,\n        startDate: globalLiveDate\n      } : asset));\n    }\n    // Optionally, if unchecked, you could clear the dates or leave as-is\n  }, [useGlobalDate, globalLiveDate]);\n  // Generate timeline tasks for Gantt chart\n  const generateTimelineTasks = startDates => {\n    if (selectedAssets.length === 0 || Object.keys(startDates).length === 0) {\n      setTimelineTasks([]);\n      return;\n    }\n    const allTasks = [];\n    let taskIndex = 0;\n    selectedAssets.forEach(asset => {\n      const assetName = asset.name; // Assuming asset object has a 'name' property\n      const assetTasks = csvData.filter(row => row['Asset Type'] === assetName);\n      if (assetTasks.length === 0) return;\n\n      // Get the correct live date for this asset\n      const liveDate = new Date(useGlobalDate ? globalLiveDate : assetLiveDates[assetName]);\n      if (isNaN(liveDate.getTime())) return;\n\n      // We'll build the tasks in reverse (from go-live backwards)\n      let currentEndDate = new Date(liveDate);\n      const ganttTasks = [];\n      let taskIndex = 0;\n\n      // Go-live task (single day)\n      ganttTasks.unshift({\n        id: `task-${taskIndex}`,\n        name: `${assetName}: Go-Live`,\n        start: liveDate.toISOString().split('T')[0],\n        end: liveDate.toISOString().split('T')[0],\n        progress: 0\n      });\n      taskIndex++;\n\n      // Process all other tasks in reverse order\n      for (let i = assetTasks.length - 1; i >= 0; i--) {\n        const taskInfo = assetTasks[i];\n        const duration = parseInt(taskInfo['Duration (Days)'], 10) || 1;\n        // Subtract working days to get the start date\n        const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n        // Task ends the working day before currentEndDate\n        const taskEndDate = new Date(currentEndDate);\n        taskEndDate.setDate(taskEndDate.getDate() - 1);\n        // Ensure end date is a working day\n        let finalTaskEndDate = new Date(taskEndDate);\n        if (isWeekend(finalTaskEndDate)) {\n          finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n        }\n        ganttTasks.unshift({\n          id: `task-${taskIndex}`,\n          name: `${taskInfo['Asset Type']}: ${taskInfo['Task']}`,\n          start: taskStartDate.toISOString().split('T')[0],\n          end: finalTaskEndDate.toISOString().split('T')[0],\n          progress: 0\n        });\n        taskIndex++;\n        // Update currentEndDate for the next task\n        currentEndDate = new Date(taskStartDate);\n      }\n\n      // Add all tasks for this asset to the main list\n      allTasks.push(...ganttTasks);\n\n      // Set the calculated start date for this asset to the start date of the first (earliest) task\n      if (ganttTasks.length > 0 && ganttTasks[0].start) {\n        newCalculatedStartDates[assetName] = ganttTasks[0].start;\n      }\n    });\n    setCalculatedStartDates(newCalculatedStartDates);\n  };\n\n  // Helper to generate a unique id (could use a counter or Date.now())\n  const generateAssetId = () => Date.now() + Math.random();\n\n  // Add a new asset instance\n  const handleAddAsset = assetType => {\n    const newAsset = {\n      id: generateAssetId(),\n      type: assetType,\n      name: assetType,\n      // default name, can be edited later\n      startDate: ''\n    };\n    setSelectedAssets(prev => [...prev, newAsset]);\n  };\n\n  // Remove an asset instance by id\n  const handleRemoveAsset = assetId => {\n    setSelectedAssets(prev => prev.filter(asset => asset.id !== assetId));\n  };\n\n  // Handler to rename an asset instance by id\n  const handleRenameAsset = (assetId, newName) => {\n    setSelectedAssets(prev => prev.map(asset => asset.id === assetId ? {\n      ...asset,\n      name: newName\n    } : asset));\n  };\n  const handleAssetLiveDateChange = (assetName, date) => {\n    setAssetLiveDates(prev => ({\n      ...prev,\n      [assetName]: date\n    }));\n  };\n  const handleAssetStartDateChange = (assetId, newDate) => {\n    setSelectedAssets(prev => prev.map(asset => asset.id === assetId ? {\n      ...asset,\n      startDate: newDate\n    } : asset));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-100 min-h-screen font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto px-6 py-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-800\",\n          children: \"Accordion Timeline Builder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1 bg-white p-6 rounded-xl shadow-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\",\n            children: \"Timeline Setup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(CampaignSetup, {\n            globalLiveDate: globalLiveDate,\n            onGlobalLiveDateChange: setGlobalLiveDate,\n            useGlobalDate: useGlobalDate,\n            onUseGlobalDateChange: setUseGlobalDate,\n            projectStartDate: projectStartDate,\n            dateErrors: dateErrors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(AssetSelector, {\n            assets: uniqueAssets || [],\n            selectedAssets: selectedAssets || [],\n            onAddAsset: handleAddAsset,\n            onRemoveAsset: handleRemoveAsset,\n            useGlobalDate: useGlobalDate,\n            globalLiveDate: globalLiveDate || '',\n            assetLiveDates: assetLiveDates || {},\n            onAssetLiveDateChange: handleAssetLiveDateChange,\n            calculatedStartDates: calculatedStartDates || {},\n            dateErrors: dateErrors || [],\n            onRenameAsset: handleRenameAsset,\n            onAssetStartDateChange: handleAssetStartDateChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\",\n            children: \"Generated Timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 25\n          }, this), timelineTasks && timelineTasks.length > 0 ? /*#__PURE__*/_jsxDEV(GanttChart, {\n            tasks: timelineTasks\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-gray-500 py-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-lg\",\n              children: \"Your timeline will appear here.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: \"Set a live date and select some assets to begin.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 9\n  }, this);\n};\n_s(TimelineBuilder, \"kC+UO8ySmAO5KIOTAHW476bnUEg=\");\n_c = TimelineBuilder;\nexport default TimelineBuilder;\nvar _c;\n$RefreshReg$(_c, \"TimelineBuilder\");","map":{"version":3,"names":["React","useState","useEffect","Papa","AssetSelector","CampaignSetup","GanttChart","jsxDEV","_jsxDEV","TimelineBuilder","_s","csvData","setCsvData","uniqueAssets","setUniqueAssets","selectedAssets","setSelectedAssets","globalLiveDate","setGlobalLiveDate","useGlobalDate","setUseGlobalDate","assetLiveDates","setAssetLiveDates","calculatedStartDates","setCalculatedStartDates","projectStartDate","setProjectStartDate","dateErrors","setDateErrors","timelineTasks","setTimelineTasks","isWeekend","date","day","getDay","getPreviousWorkingDay","workingDate","Date","setDate","getDate","getNextWorkingDay","subtractWorkingDays","endDate","workingDaysToSubtract","currentDate","remainingDays","addWorkingDays","startDate","workingDaysToAdd","parse","window","location","origin","download","header","skipEmptyLines","complete","results","parsedData","data","assetTypes","Set","map","row","filter","type","error","console","length","today","setHours","newCalculatedStartDates","newDateErrors","allStartDates","allTasks","forEach","asset","assetTasks","liveDate","isNaN","getTime","currentEndDate","ganttTasks","taskIndex","unshift","id","name","start","toISOString","split","end","progress","i","taskInfo","duration","parseInt","taskStartDate","taskEndDate","finalTaskEndDate","push","earliestDate","Math","min","newLiveDates","updated","prev","generateTimelineTasks","startDates","Object","keys","assetName","generateAssetId","now","random","handleAddAsset","assetType","newAsset","handleRemoveAsset","assetId","handleRenameAsset","newName","handleAssetLiveDateChange","handleAssetStartDateChange","newDate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onGlobalLiveDateChange","onUseGlobalDateChange","assets","onAddAsset","onRemoveAsset","onAssetLiveDateChange","onRenameAsset","onAssetStartDateChange","tasks","_c","$RefreshReg$"],"sources":["/Users/nicklinfamilymac/Desktop/Accordion3F/src/TimelineBuilder.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Papa from 'papaparse';\nimport AssetSelector from './components/AssetSelector';\nimport CampaignSetup from './components/CampaignSetup';\nimport GanttChart from './components/GanttChart';\n\nconst TimelineBuilder = () => {\n    // CSV and asset data\n    const [csvData, setCsvData] = useState([]);\n    const [uniqueAssets, setUniqueAssets] = useState([]);\n    // Each selected asset is now an object with a unique id, type, name, and startDate\n    const [selectedAssets, setSelectedAssets] = useState([]);\n    \n    // Live date management\n    const [globalLiveDate, setGlobalLiveDate] = useState('');\n    const [useGlobalDate, setUseGlobalDate] = useState(true);\n    const [assetLiveDates, setAssetLiveDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n    \n    // Calculated results\n    const [calculatedStartDates, setCalculatedStartDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n    const [projectStartDate, setProjectStartDate] = useState(''); // Earliest start date across all assets\n    const [dateErrors, setDateErrors] = useState([]); // Array of asset names that start before today\n    \n    // Final timeline for display\n    const [timelineTasks, setTimelineTasks] = useState([]);\n\n    // Helper function to check if date is weekend\n    const isWeekend = (date) => {\n        const day = date.getDay();\n        return day === 0 || day === 6; // Sunday = 0, Saturday = 6\n    };\n\n    // Helper function to get previous working day\n    const getPreviousWorkingDay = (date) => {\n        let workingDate = new Date(date);\n        do {\n            workingDate.setDate(workingDate.getDate() - 1);\n        } while (isWeekend(workingDate));\n        return workingDate;\n    };\n\n    // Helper function to get next working day\n    const getNextWorkingDay = (date) => {\n        let workingDate = new Date(date);\n        do {\n            workingDate.setDate(workingDate.getDate() + 1);\n        } while (isWeekend(workingDate));\n        return workingDate;\n    };\n\n    // Helper function to subtract working days (backwards calculation)\n    const subtractWorkingDays = (endDate, workingDaysToSubtract) => {\n        let currentDate = new Date(endDate);\n        let remainingDays = workingDaysToSubtract;\n        \n        // Subtract working days\n        while (remainingDays > 0) {\n            currentDate.setDate(currentDate.getDate() - 1);\n            \n            // Only count non-weekend days\n            if (!isWeekend(currentDate)) {\n                remainingDays--;\n            }\n        }\n        \n        return currentDate;\n    };\n\n    // Helper function to add working days (forward calculation for display)\n    const addWorkingDays = (startDate, workingDaysToAdd) => {\n    if (workingDaysToAdd <= 0) {\n        return new Date(startDate);\n    }\n\n    let currentDate = new Date(startDate);\n    let remainingDays = workingDaysToAdd -1;\n\n    while (remainingDays > 0) {\n        currentDate.setDate(currentDate.getDate() + 1);\n        if (!isWeekend(currentDate)) {\n            remainingDays--;\n        }\n    }\n\n    // Ensure the final day is a working day\n    while (isWeekend(currentDate)) {\n        currentDate.setDate(currentDate.getDate() + 1);\n    }\n\n    return currentDate;\n};\n\n    // Load CSV data\n    useEffect(() => {\n        Papa.parse(`${window.location.origin}/Group_Asset_Task_Time.csv`, {\n            download: true,\n            header: true,\n            skipEmptyLines: true,\n            complete: (results) => {\n                const parsedData = results.data;\n                setCsvData(parsedData);\n                \n                // Extract unique asset types from CSV\n                const assetTypes = [...new Set(parsedData.map(row => row['Asset Type']))].filter(type => type);\n                setUniqueAssets(assetTypes);\n            },\n            error: (error) => {\n                console.error(\"Error parsing CSV file:\", error);\n            }\n        });\n    }, []);\n\n    // Calculate backwards timeline when live dates or assets change\n    useEffect(() => {\n        if (selectedAssets.length === 0 || csvData.length === 0) {\n            setTimelineTasks([]);\n            setCalculatedStartDates({});\n            setProjectStartDate('');\n            setDateErrors([]);\n            return;\n        }\n\n        const today = new Date();\n        today.setHours(0, 0, 0, 0); // Reset time for accurate comparison\n        \n        const newCalculatedStartDates = {};\n        const newDateErrors = [];\n        const allStartDates = [];\n        const allTasks = [];\n\n        // Loop over each selected asset instance (not just type)\n        selectedAssets.forEach(asset => {\n            // asset: { id, type, name, startDate }\n            if (!asset.startDate) return; // Skip if no start date set\n\n            // Find all tasks for this asset type from the CSV\n            const assetTasks = csvData.filter(row => row['Asset Type'] === asset.type);\n            if (assetTasks.length === 0) return;\n\n            // Use the asset instance's startDate as the go-live date\n            const liveDate = new Date(asset.startDate);\n            if (isNaN(liveDate.getTime())) return;\n\n            // We'll build the tasks in reverse (from go-live backwards)\n            let currentEndDate = new Date(liveDate);\n            const ganttTasks = [];\n            let taskIndex = 0;\n\n            // Go-live task (single day)\n            ganttTasks.unshift({\n                id: `${asset.id}-go-live`,\n                name: `${asset.name}: Go-Live`, // Use custom name\n                start: liveDate.toISOString().split('T')[0],\n                end: liveDate.toISOString().split('T')[0],\n                progress: 0,\n            });\n            taskIndex++;\n\n            // Process all other tasks in reverse order\n            for (let i = assetTasks.length - 1; i >= 0; i--) {\n                const taskInfo = assetTasks[i];\n                const duration = parseInt(taskInfo['Duration (Days)'], 10) || 1;\n                // Subtract working days to get the start date\n                const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n                // Task ends the working day before currentEndDate\n                const taskEndDate = new Date(currentEndDate);\n                taskEndDate.setDate(taskEndDate.getDate() - 1);\n                // Ensure end date is a working day\n                let finalTaskEndDate = new Date(taskEndDate);\n                if (isWeekend(finalTaskEndDate)) {\n                    finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n                }\n                ganttTasks.unshift({\n                    id: `${asset.id}-task-${taskIndex}`,\n                    name: `${asset.name}: ${taskInfo['Task']}`,\n                    start: taskStartDate.toISOString().split('T')[0],\n                    end: finalTaskEndDate.toISOString().split('T')[0],\n                    progress: 0,\n                });\n                taskIndex++;\n                // Update currentEndDate for the next task\n                currentEndDate = new Date(taskStartDate);\n            }\n\n            // Add all tasks for this asset instance to the main list\n            allTasks.push(...ganttTasks);\n\n            // Set the calculated start date for this asset to the start date of the first (earliest) task\n            if (ganttTasks.length > 0 && ganttTasks[0].start) {\n                newCalculatedStartDates[asset.id] = ganttTasks[0].start;\n                allStartDates.push(new Date(ganttTasks[0].start));\n            }\n\n            // Check if start date is before today\n            if (ganttTasks.length > 0 && new Date(ganttTasks[0].start) < today) {\n                newDateErrors.push(asset.name);\n            }\n        });\n\n        // Find earliest start date across all assets\n        if (allStartDates.length > 0) {\n            const earliestDate = new Date(Math.min(...allStartDates));\n            setProjectStartDate(earliestDate.toISOString().split('T')[0]);\n        }\n\n        setTimelineTasks(allTasks);\n        setCalculatedStartDates(newCalculatedStartDates);\n        setDateErrors(newDateErrors);\n    }, [selectedAssets, globalLiveDate, useGlobalDate, assetLiveDates, csvData]);\n// This new useEffect pre-populates individual dates when switching from global mode\n    useEffect(() => {\n        if (!useGlobalDate && globalLiveDate && selectedAssets.length > 0) {\n            const newLiveDates = { ...assetLiveDates };\n            let updated = false;\n            selectedAssets.forEach(asset => {\n                // Pre-fill only if the asset doesn't have an individual date set\n                if (!newLiveDates[asset.name]) { // Changed to asset.name\n                    newLiveDates[asset.name] = globalLiveDate; // Changed to asset.name\n                    updated = true;\n                }\n            });\n            if (updated) {\n                setAssetLiveDates(newLiveDates);\n            }\n        }\n    }, [useGlobalDate, globalLiveDate, selectedAssets, assetLiveDates]);\n\n// Sync all asset instance startDates to globalLiveDate if useGlobalDate is true\nuseEffect(() => {\n    if (useGlobalDate && globalLiveDate) {\n        setSelectedAssets(prev =>\n            prev.map(asset =>\n                asset.startDate !== globalLiveDate\n                    ? { ...asset, startDate: globalLiveDate }\n                    : asset\n            )\n        );\n    }\n    // Optionally, if unchecked, you could clear the dates or leave as-is\n}, [useGlobalDate, globalLiveDate]);\n    // Generate timeline tasks for Gantt chart\n    const generateTimelineTasks = (startDates) => {\n        if (selectedAssets.length === 0 || Object.keys(startDates).length === 0) {\n            setTimelineTasks([]);\n            return;\n        }\n\n        const allTasks = [];\n        let taskIndex = 0;\n\n        selectedAssets.forEach(asset => {\n            const assetName = asset.name; // Assuming asset object has a 'name' property\n            const assetTasks = csvData.filter(row => row['Asset Type'] === assetName);\n            if (assetTasks.length === 0) return;\n\n            // Get the correct live date for this asset\n            const liveDate = new Date(useGlobalDate ? globalLiveDate : assetLiveDates[assetName]);\n            if (isNaN(liveDate.getTime())) return;\n\n            // We'll build the tasks in reverse (from go-live backwards)\n            let currentEndDate = new Date(liveDate);\n            const ganttTasks = [];\n            let taskIndex = 0;\n\n            // Go-live task (single day)\n            ganttTasks.unshift({\n                id: `task-${taskIndex}`,\n                name: `${assetName}: Go-Live`,\n                start: liveDate.toISOString().split('T')[0],\n                end: liveDate.toISOString().split('T')[0],\n                progress: 0,\n            });\n            taskIndex++;\n\n            // Process all other tasks in reverse order\n            for (let i = assetTasks.length - 1; i >= 0; i--) {\n                const taskInfo = assetTasks[i];\n                const duration = parseInt(taskInfo['Duration (Days)'], 10) || 1;\n                // Subtract working days to get the start date\n                const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n                // Task ends the working day before currentEndDate\n                const taskEndDate = new Date(currentEndDate);\n                taskEndDate.setDate(taskEndDate.getDate() - 1);\n                // Ensure end date is a working day\n                let finalTaskEndDate = new Date(taskEndDate);\n                if (isWeekend(finalTaskEndDate)) {\n                    finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n                }\n                ganttTasks.unshift({\n                    id: `task-${taskIndex}`,\n                    name: `${taskInfo['Asset Type']}: ${taskInfo['Task']}`,\n                    start: taskStartDate.toISOString().split('T')[0],\n                    end: finalTaskEndDate.toISOString().split('T')[0],\n                    progress: 0,\n                });\n                taskIndex++;\n                // Update currentEndDate for the next task\n                currentEndDate = new Date(taskStartDate);\n            }\n\n            // Add all tasks for this asset to the main list\n            allTasks.push(...ganttTasks);\n\n            // Set the calculated start date for this asset to the start date of the first (earliest) task\n            if (ganttTasks.length > 0 && ganttTasks[0].start) {\n                newCalculatedStartDates[assetName] = ganttTasks[0].start;\n            }\n        });\n        setCalculatedStartDates(newCalculatedStartDates);\n    };\n\n    // Helper to generate a unique id (could use a counter or Date.now())\n    const generateAssetId = () => Date.now() + Math.random();\n\n    // Add a new asset instance\n    const handleAddAsset = (assetType) => {\n        const newAsset = {\n            id: generateAssetId(),\n            type: assetType,\n            name: assetType, // default name, can be edited later\n            startDate: ''\n        };\n        setSelectedAssets(prev => [...prev, newAsset]);\n    };\n\n    // Remove an asset instance by id\n    const handleRemoveAsset = (assetId) => {\n        setSelectedAssets(prev => prev.filter(asset => asset.id !== assetId));\n    };\n\n    // Handler to rename an asset instance by id\n    const handleRenameAsset = (assetId, newName) => {\n        setSelectedAssets(prev =>\n            prev.map(asset =>\n                asset.id === assetId ? { ...asset, name: newName } : asset\n            )\n        );\n    };\n\n    const handleAssetLiveDateChange = (assetName, date) => {\n        setAssetLiveDates(prev => ({\n            ...prev,\n            [assetName]: date\n        }));\n    };\n\n    const handleAssetStartDateChange = (assetId, newDate) => {\n        setSelectedAssets(prev =>\n            prev.map(asset =>\n                asset.id === assetId ? { ...asset, startDate: newDate } : asset\n            )\n        );\n    };\n\n    return (\n        <div className=\"bg-gray-100 min-h-screen font-sans\">\n            <header className=\"bg-white shadow-md\">\n                <div className=\"container mx-auto px-6 py-4\">\n                    <h1 className=\"text-3xl font-bold text-gray-800\">Accordion Timeline Builder</h1>\n                </div>\n            </header>\n            <main className=\"container mx-auto p-6\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                    {/* LEFT COLUMN: CONTROLS */}\n                    <div className=\"lg:col-span-1 bg-white p-6 rounded-xl shadow-lg\">\n                        <h2 className=\"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\">Timeline Setup</h2>\n                        <CampaignSetup \n                            globalLiveDate={globalLiveDate}\n                            onGlobalLiveDateChange={setGlobalLiveDate}\n                            useGlobalDate={useGlobalDate}\n                            onUseGlobalDateChange={setUseGlobalDate}\n                            projectStartDate={projectStartDate}\n                            dateErrors={dateErrors}\n                        />\n<AssetSelector\n    assets={uniqueAssets || []}\n    selectedAssets={selectedAssets || []}\n    onAddAsset={handleAddAsset}\n    onRemoveAsset={handleRemoveAsset}\n    useGlobalDate={useGlobalDate}\n    globalLiveDate={globalLiveDate || ''}\n    assetLiveDates={assetLiveDates || {}}\n    onAssetLiveDateChange={handleAssetLiveDateChange}\n    calculatedStartDates={calculatedStartDates || {}}\n    dateErrors={dateErrors || []}\n    onRenameAsset={handleRenameAsset}\n    onAssetStartDateChange={handleAssetStartDateChange}\n/>\n                    </div>\n                    \n                    {/* RIGHT COLUMN: TIMELINE */}\n                    <div className=\"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg\">\n                        <h2 className=\"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\">Generated Timeline</h2>\n                        \n                     {/* Error Messages - Temporarily Disabled */}\n{/* {dateErrors.length > 0 && (\n    <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n        <h3 className=\"text-red-800 font-medium mb-2\">⚠️ Timeline Conflicts</h3>\n        <p className=\"text-red-700 text-sm mb-2\">\n            The following assets cannot be completed by their live dates:\n        </p>\n        <ul className=\"text-red-700 text-sm\">\n            {dateErrors.map(asset => (\n                <li key={asset} className=\"ml-4\">\n                    • {asset} (would need to start on {calculatedStartDates[asset]})\n                </li>\n            ))}\n        </ul>\n        <p className=\"text-red-700 text-sm mt-2 font-medium\">\n            Manual adjustment of task durations required.\n        </p>\n    </div>\n)} */}\n\n                        {timelineTasks && timelineTasks.length > 0 ? (\n                            <GanttChart tasks={timelineTasks} />\n                        ) : (\n                            <div className=\"text-center text-gray-500 py-10\">\n                                <p className=\"text-lg\">Your timeline will appear here.</p>\n                                <p className=\"text-sm\">Set a live date and select some assets to begin.</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </main>\n        </div>\n    );\n};\n\nexport default TimelineBuilder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
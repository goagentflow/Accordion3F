{"ast":null,"code":"var _jsxFileName = \"/Users/nicklinfamilymac/Desktop/Accordion3F/src/TimelineBuilder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Papa from 'papaparse';\nimport AssetSelector from './components/AssetSelector';\nimport CampaignSetup from './components/CampaignSetup';\nimport GanttChart from './components/GanttChart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimelineBuilder = () => {\n  _s();\n  // CSV and asset data\n  const [csvData, setCsvData] = useState([]);\n  const [uniqueAssets, setUniqueAssets] = useState([]);\n  // Each selected asset is now an object with a unique id, type, name, and startDate\n  const [selectedAssets, setSelectedAssets] = useState([]);\n\n  // Live date management\n  const [globalLiveDate, setGlobalLiveDate] = useState('');\n  const [useGlobalDate, setUseGlobalDate] = useState(true);\n  const [assetLiveDates, setAssetLiveDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n\n  // Calculated results\n  const [calculatedStartDates, setCalculatedStartDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n  const [projectStartDate, setProjectStartDate] = useState(''); // Earliest start date across all assets\n  const [dateErrors, setDateErrors] = useState([]); // Array of asset names that start before today\n\n  // Final timeline for display\n  const [timelineTasks, setTimelineTasks] = useState([]);\n  const [showInfoBox, setShowInfoBox] = useState(true); // Add state for info box\n\n  // Add state to store custom task durations for each asset instance\n  const [assetTaskDurations, setAssetTaskDurations] = useState({}); // { assetId: { taskName: duration, ... } }\n\n  // Add state to store bank holidays\n  const [bankHolidays, setBankHolidays] = useState([]); // Array of YYYY-MM-DD strings\n\n  // Helper function to check if date is a non-working day (weekend or bank holiday)\n  const isNonWorkingDay = date => {\n    const day = date.getDay();\n    const yyyy_mm_dd = date.toISOString().split('T')[0];\n    return day === 0 || day === 6 || bankHolidays.includes(yyyy_mm_dd);\n  };\n\n  // Helper function to get previous working day\n  const getPreviousWorkingDay = date => {\n    let workingDate = new Date(date);\n    do {\n      workingDate.setDate(workingDate.getDate() - 1);\n    } while (isNonWorkingDay(workingDate));\n    return workingDate;\n  };\n\n  // Helper function to get next working day\n  const getNextWorkingDay = date => {\n    let workingDate = new Date(date);\n    do {\n      workingDate.setDate(workingDate.getDate() + 1);\n    } while (isNonWorkingDay(workingDate));\n    return workingDate;\n  };\n\n  // Helper function to subtract working days (backwards calculation)\n  const subtractWorkingDays = (endDate, workingDaysToSubtract) => {\n    let currentDate = new Date(endDate);\n    let remainingDays = workingDaysToSubtract;\n    // Subtract working days\n    while (remainingDays > 0) {\n      currentDate.setDate(currentDate.getDate() - 1);\n      // Only count non-non-working days\n      if (!isNonWorkingDay(currentDate)) {\n        remainingDays--;\n      }\n    }\n    return currentDate;\n  };\n\n  // Helper function to add working days (forward calculation for display)\n  const addWorkingDays = (startDate, workingDaysToAdd) => {\n    if (workingDaysToAdd <= 0) {\n      return new Date(startDate);\n    }\n    let currentDate = new Date(startDate);\n    let remainingDays = workingDaysToAdd - 1;\n    while (remainingDays > 0) {\n      currentDate.setDate(currentDate.getDate() + 1);\n      if (!isNonWorkingDay(currentDate)) {\n        remainingDays--;\n      }\n    }\n    // Ensure the final day is a working day\n    while (isNonWorkingDay(currentDate)) {\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    return currentDate;\n  };\n\n  // Load CSV data\n  useEffect(() => {\n    Papa.parse(`${window.location.origin}/Group_Asset_Task_Time.csv`, {\n      download: true,\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        const parsedData = results.data;\n        setCsvData(parsedData);\n\n        // Extract unique asset types from CSV\n        const assetTypes = [...new Set(parsedData.map(row => row['Asset Type']))].filter(type => type);\n        setUniqueAssets(assetTypes);\n      },\n      error: error => {\n        console.error(\"Error parsing CSV file:\", error);\n      }\n    });\n  }, []);\n\n  // Fetch UK bank holidays for England and Wales on app load\n  useEffect(() => {\n    fetch('https://www.gov.uk/bank-holidays.json').then(response => response.json()).then(data => {\n      // Get all dates for England and Wales\n      const events = data['england-and-wales'].events;\n      // Get all dates for the next 10 years\n      const now = new Date();\n      const tenYearsFromNow = new Date(now.getFullYear() + 10, now.getMonth(), now.getDate());\n      const holidayDates = events.map(event => event.date).filter(dateStr => {\n        const date = new Date(dateStr);\n        return date >= now && date <= tenYearsFromNow;\n      });\n      setBankHolidays(holidayDates);\n    }).catch(err => {\n      // If fetch fails, fallback to an empty array (or you could use a static list)\n      setBankHolidays([]);\n    });\n  }, []);\n\n  // Calculate backwards timeline when live dates or assets change\n  useEffect(() => {\n    if (selectedAssets.length === 0 || csvData.length === 0) {\n      setTimelineTasks([]);\n      setCalculatedStartDates({});\n      setProjectStartDate('');\n      setDateErrors([]);\n      return;\n    }\n    const today = new Date();\n    today.setHours(0, 0, 0, 0); // Reset time for accurate comparison\n\n    const newCalculatedStartDates = {};\n    const newDateErrors = [];\n    const allStartDates = [];\n    const allTasks = [];\n\n    // Loop over each selected asset instance (not just type)\n    selectedAssets.forEach(asset => {\n      // asset: { id, type, name, startDate }\n      if (!asset.startDate) return; // Skip if no start date set\n\n      // Find all tasks for this asset type from the CSV\n      const assetTasks = csvData.filter(row => row['Asset Type'] === asset.type);\n      if (assetTasks.length === 0) return;\n\n      // Use the asset instance's startDate as the go-live date\n      const liveDate = new Date(asset.startDate);\n      if (isNaN(liveDate.getTime())) return;\n\n      // We'll build the tasks in reverse (from go-live backwards)\n      let currentEndDate = new Date(liveDate);\n      const ganttTasks = [];\n      let taskIndex = 0;\n\n      // Go-live task (single day)\n      ganttTasks.unshift({\n        id: `${asset.id}-go-live`,\n        name: `${asset.name}: Go-Live`,\n        // Use custom name\n        start: liveDate.toISOString().split('T')[0],\n        end: liveDate.toISOString().split('T')[0],\n        progress: 0\n      });\n      taskIndex++;\n\n      // Process all other tasks in reverse order\n      for (let i = assetTasks.length - 1; i >= 0; i--) {\n        const taskInfo = assetTasks[i];\n        // Use custom duration if present, else default from CSV\n        const customDurations = assetTaskDurations[asset.id] || {};\n        const duration = customDurations[taskInfo['Task']] !== undefined ? customDurations[taskInfo['Task']] : parseInt(taskInfo['Duration (Days)'], 10) || 1;\n        // Subtract working days to get the start date\n        const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n        // Task ends the working day before currentEndDate\n        const taskEndDate = new Date(currentEndDate);\n        taskEndDate.setDate(taskEndDate.getDate() - 1);\n        // Ensure end date is a working day\n        let finalTaskEndDate = new Date(taskEndDate);\n        if (isNonWorkingDay(finalTaskEndDate)) {\n          finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n        }\n        ganttTasks.unshift({\n          id: `${asset.id}-task-${taskIndex}`,\n          name: `${asset.name}: ${taskInfo['Task']}`,\n          start: taskStartDate.toISOString().split('T')[0],\n          end: finalTaskEndDate.toISOString().split('T')[0],\n          progress: 0\n        });\n        taskIndex++;\n        // Update currentEndDate for the next task\n        currentEndDate = new Date(taskStartDate);\n      }\n\n      // Add all tasks for this asset instance to the main list\n      allTasks.push(...ganttTasks);\n\n      // Set the calculated start date for this asset to the start date of the first (earliest) task\n      if (ganttTasks.length > 0 && ganttTasks[0].start) {\n        newCalculatedStartDates[asset.id] = ganttTasks[0].start;\n        allStartDates.push(new Date(ganttTasks[0].start));\n      }\n\n      // Check if start date is before today\n      if (ganttTasks.length > 0 && new Date(ganttTasks[0].start) < today) {\n        newDateErrors.push(asset.id);\n      }\n    });\n\n    // Find earliest start date across all assets\n    if (allStartDates.length > 0) {\n      const earliestDate = new Date(Math.min(...allStartDates));\n      setProjectStartDate(earliestDate.toISOString().split('T')[0]);\n    }\n    setTimelineTasks(allTasks);\n    setCalculatedStartDates(newCalculatedStartDates);\n    setDateErrors(newDateErrors);\n  }, [selectedAssets, globalLiveDate, useGlobalDate, assetLiveDates, csvData, assetTaskDurations]);\n  // This new useEffect pre-populates individual dates when switching from global mode\n  useEffect(() => {\n    if (!useGlobalDate && globalLiveDate && selectedAssets.length > 0) {\n      const newLiveDates = {\n        ...assetLiveDates\n      };\n      let updated = false;\n      selectedAssets.forEach(asset => {\n        // Pre-fill only if the asset doesn't have an individual date set\n        if (!newLiveDates[asset.name]) {\n          // Changed to asset.name\n          newLiveDates[asset.name] = globalLiveDate; // Changed to asset.name\n          updated = true;\n        }\n      });\n      if (updated) {\n        setAssetLiveDates(newLiveDates);\n      }\n    }\n  }, [useGlobalDate, globalLiveDate, selectedAssets, assetLiveDates]);\n\n  // Sync all asset instance startDates to globalLiveDate if useGlobalDate is true\n  useEffect(() => {\n    if (useGlobalDate && globalLiveDate) {\n      setSelectedAssets(prev => prev.map(asset => asset.startDate !== globalLiveDate ? {\n        ...asset,\n        startDate: globalLiveDate\n      } : asset));\n    }\n    // Optionally, if unchecked, you could clear the dates or leave as-is\n  }, [useGlobalDate, globalLiveDate]);\n  // Generate timeline tasks for Gantt chart\n  const generateTimelineTasks = startDates => {\n    if (selectedAssets.length === 0 || Object.keys(startDates).length === 0) {\n      setTimelineTasks([]);\n      return;\n    }\n    const allTasks = [];\n    let taskIndex = 0;\n    selectedAssets.forEach(asset => {\n      const assetName = asset.name; // Assuming asset object has a 'name' property\n      const assetTasks = csvData.filter(row => row['Asset Type'] === assetName);\n      if (assetTasks.length === 0) return;\n\n      // Get the correct live date for this asset\n      const liveDate = new Date(useGlobalDate ? globalLiveDate : assetLiveDates[assetName]);\n      if (isNaN(liveDate.getTime())) return;\n\n      // We'll build the tasks in reverse (from go-live backwards)\n      let currentEndDate = new Date(liveDate);\n      const ganttTasks = [];\n      let taskIndex = 0;\n\n      // Go-live task (single day)\n      ganttTasks.unshift({\n        id: `task-${taskIndex}`,\n        name: `${assetName}: Go-Live`,\n        start: liveDate.toISOString().split('T')[0],\n        end: liveDate.toISOString().split('T')[0],\n        progress: 0\n      });\n      taskIndex++;\n\n      // Process all other tasks in reverse order\n      for (let i = assetTasks.length - 1; i >= 0; i--) {\n        const taskInfo = assetTasks[i];\n        const duration = parseInt(taskInfo['Duration (Days)'], 10) || 1;\n        // Subtract working days to get the start date\n        const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n        // Task ends the working day before currentEndDate\n        const taskEndDate = new Date(currentEndDate);\n        taskEndDate.setDate(taskEndDate.getDate() - 1);\n        // Ensure end date is a working day\n        let finalTaskEndDate = new Date(taskEndDate);\n        if (isNonWorkingDay(finalTaskEndDate)) {\n          finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n        }\n        ganttTasks.unshift({\n          id: `task-${taskIndex}`,\n          name: `${taskInfo['Asset Type']}: ${taskInfo['Task']}`,\n          start: taskStartDate.toISOString().split('T')[0],\n          end: finalTaskEndDate.toISOString().split('T')[0],\n          progress: 0\n        });\n        taskIndex++;\n        // Update currentEndDate for the next task\n        currentEndDate = new Date(taskStartDate);\n      }\n\n      // Add all tasks for this asset to the main list\n      allTasks.push(...ganttTasks);\n\n      // Set the calculated start date for this asset to the start date of the first (earliest) task\n      if (ganttTasks.length > 0 && ganttTasks[0].start) {\n        newCalculatedStartDates[assetName] = ganttTasks[0].start;\n      }\n    });\n    setCalculatedStartDates(newCalculatedStartDates);\n  };\n\n  // Helper to generate a unique id (could use a counter or Date.now())\n  const generateAssetId = () => Date.now() + Math.random();\n\n  // Add a new asset instance\n  const handleAddAsset = assetType => {\n    const newAsset = {\n      id: generateAssetId(),\n      type: assetType,\n      name: assetType,\n      // default name, can be edited later\n      startDate: useGlobalDate && globalLiveDate ? globalLiveDate : ''\n    };\n    setSelectedAssets(prev => [...prev, newAsset]);\n  };\n\n  // Remove an asset instance by id\n  const handleRemoveAsset = assetId => {\n    setSelectedAssets(prev => prev.filter(asset => asset.id !== assetId));\n  };\n\n  // Handler to rename an asset instance by id\n  const handleRenameAsset = (assetId, newName) => {\n    setSelectedAssets(prev => prev.map(asset => asset.id === assetId ? {\n      ...asset,\n      name: newName\n    } : asset));\n  };\n  const handleAssetLiveDateChange = (assetName, date) => {\n    setAssetLiveDates(prev => ({\n      ...prev,\n      [assetName]: date\n    }));\n  };\n  const handleAssetStartDateChange = (assetId, newDate) => {\n    setSelectedAssets(prev => prev.map(asset => asset.id === assetId ? {\n      ...asset,\n      startDate: newDate\n    } : asset));\n  };\n\n  // Handler to save custom task durations for an asset\n  const handleSaveTaskDurations = (assetId, durations) => {\n    setAssetTaskDurations(prev => ({\n      ...prev,\n      [assetId]: durations\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-100 min-h-screen font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto px-6 py-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-800\",\n          children: \"Accordion Timeline Builder\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }, this), showInfoBox && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative mb-6 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-900\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"absolute top-2 right-2 text-blue-700 hover:text-blue-900 text-lg font-bold focus:outline-none\",\n            onClick: () => setShowInfoBox(false),\n            \"aria-label\": \"Close instructions\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"How to Build Your Campaign Timeline:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"list-decimal pl-5 mt-2 space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Choose Your Campaign Start Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 86\n              }, this), \"If all assets launch on the same day, set a global start date and check \\u201CUse same live date for all assets.\\u201D\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 145\n              }, this), \"If assets launch on different days, uncheck the box and set dates individually for each asset.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Add Assets:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 65\n              }, this), \"Click \\u201CAdd\\u201D next to each asset type you need.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 82\n              }, this), \"Need the same asset type more than once? Click \\u201CAdd\\u201D again and give each a unique name.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Customize Assets:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 71\n              }, this), \"Rename each asset for clarity (e.g., \\u201CMetro Advertorial \\u2013 August\\u201D).\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 104\n              }, this), \"Set or confirm the start date for each asset.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Review Your Timeline:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 75\n              }, this), \"Remove any asset you don\\u2019t need.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 69\n              }, this), \"Check the timeline to ensure all assets are scheduled as planned.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Adjust Your Timeline if Needed:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 85\n              }, this), \"If an asset\\u2019s timeline can\\u2019t be completed by the selected start date, you\\u2019ll see a warning.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 128\n              }, this), \"\\u2013 You can either change the go-live date, or\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 81\n              }, this), \"\\u2013 Manually shorten the durations of individual tasks (\\u201Caccordion\\u201D your timeline) until the schedule fits.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-1 bg-white p-6 rounded-xl shadow-lg overflow-x-auto\",\n          style: {\n            minWidth: 380\n          } // You can adjust 380 to your needs\n          ,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\",\n            children: \"Timeline Setup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(CampaignSetup, {\n            globalLiveDate: globalLiveDate,\n            onGlobalLiveDateChange: setGlobalLiveDate,\n            useGlobalDate: useGlobalDate,\n            onUseGlobalDateChange: setUseGlobalDate,\n            projectStartDate: projectStartDate,\n            dateErrors: dateErrors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(AssetSelector, {\n            assets: uniqueAssets || [],\n            selectedAssets: selectedAssets || [],\n            onAddAsset: handleAddAsset,\n            onRemoveAsset: handleRemoveAsset,\n            useGlobalDate: useGlobalDate,\n            globalLiveDate: globalLiveDate || '',\n            assetLiveDates: assetLiveDates || {},\n            onAssetLiveDateChange: handleAssetLiveDateChange,\n            calculatedStartDates: calculatedStartDates || {},\n            dateErrors: dateErrors || [],\n            onRenameAsset: handleRenameAsset,\n            onAssetStartDateChange: handleAssetStartDateChange,\n            csvData: csvData,\n            onSaveTaskDurations: handleSaveTaskDurations,\n            isNonWorkingDay: isNonWorkingDay\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg\",\n          style: {\n            minWidth: 0,\n            maxWidth: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\",\n            children: \"Generated Timeline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 25\n          }, this), timelineTasks && timelineTasks.length > 0 ? /*#__PURE__*/_jsxDEV(GanttChart, {\n            tasks: timelineTasks\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-gray-500 py-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-lg\",\n              children: \"Your timeline will appear here.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: \"Set a live date and select some assets to begin.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 390,\n    columnNumber: 9\n  }, this);\n};\n_s(TimelineBuilder, \"a21txADGHLOfZ/8iL7tdzn3FB7M=\");\n_c = TimelineBuilder;\nexport default TimelineBuilder;\nvar _c;\n$RefreshReg$(_c, \"TimelineBuilder\");","map":{"version":3,"names":["React","useState","useEffect","Papa","AssetSelector","CampaignSetup","GanttChart","jsxDEV","_jsxDEV","TimelineBuilder","_s","csvData","setCsvData","uniqueAssets","setUniqueAssets","selectedAssets","setSelectedAssets","globalLiveDate","setGlobalLiveDate","useGlobalDate","setUseGlobalDate","assetLiveDates","setAssetLiveDates","calculatedStartDates","setCalculatedStartDates","projectStartDate","setProjectStartDate","dateErrors","setDateErrors","timelineTasks","setTimelineTasks","showInfoBox","setShowInfoBox","assetTaskDurations","setAssetTaskDurations","bankHolidays","setBankHolidays","isNonWorkingDay","date","day","getDay","yyyy_mm_dd","toISOString","split","includes","getPreviousWorkingDay","workingDate","Date","setDate","getDate","getNextWorkingDay","subtractWorkingDays","endDate","workingDaysToSubtract","currentDate","remainingDays","addWorkingDays","startDate","workingDaysToAdd","parse","window","location","origin","download","header","skipEmptyLines","complete","results","parsedData","data","assetTypes","Set","map","row","filter","type","error","console","fetch","then","response","json","events","now","tenYearsFromNow","getFullYear","getMonth","holidayDates","event","dateStr","catch","err","length","today","setHours","newCalculatedStartDates","newDateErrors","allStartDates","allTasks","forEach","asset","assetTasks","liveDate","isNaN","getTime","currentEndDate","ganttTasks","taskIndex","unshift","id","name","start","end","progress","i","taskInfo","customDurations","duration","undefined","parseInt","taskStartDate","taskEndDate","finalTaskEndDate","push","earliestDate","Math","min","newLiveDates","updated","prev","generateTimelineTasks","startDates","Object","keys","assetName","generateAssetId","random","handleAddAsset","assetType","newAsset","handleRemoveAsset","assetId","handleRenameAsset","newName","handleAssetLiveDateChange","handleAssetStartDateChange","newDate","handleSaveTaskDurations","durations","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","minWidth","onGlobalLiveDateChange","onUseGlobalDateChange","assets","onAddAsset","onRemoveAsset","onAssetLiveDateChange","onRenameAsset","onAssetStartDateChange","onSaveTaskDurations","maxWidth","tasks","_c","$RefreshReg$"],"sources":["/Users/nicklinfamilymac/Desktop/Accordion3F/src/TimelineBuilder.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Papa from 'papaparse';\nimport AssetSelector from './components/AssetSelector';\nimport CampaignSetup from './components/CampaignSetup';\nimport GanttChart from './components/GanttChart';\n\nconst TimelineBuilder = () => {\n    // CSV and asset data\n    const [csvData, setCsvData] = useState([]);\n    const [uniqueAssets, setUniqueAssets] = useState([]);\n    // Each selected asset is now an object with a unique id, type, name, and startDate\n    const [selectedAssets, setSelectedAssets] = useState([]);\n    \n    // Live date management\n    const [globalLiveDate, setGlobalLiveDate] = useState('');\n    const [useGlobalDate, setUseGlobalDate] = useState(true);\n    const [assetLiveDates, setAssetLiveDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n    \n    // Calculated results\n    const [calculatedStartDates, setCalculatedStartDates] = useState({}); // {assetName: 'YYYY-MM-DD'}\n    const [projectStartDate, setProjectStartDate] = useState(''); // Earliest start date across all assets\n    const [dateErrors, setDateErrors] = useState([]); // Array of asset names that start before today\n    \n    // Final timeline for display\n    const [timelineTasks, setTimelineTasks] = useState([]);\n    const [showInfoBox, setShowInfoBox] = useState(true); // Add state for info box\n\n    // Add state to store custom task durations for each asset instance\n    const [assetTaskDurations, setAssetTaskDurations] = useState({}); // { assetId: { taskName: duration, ... } }\n\n    // Add state to store bank holidays\n    const [bankHolidays, setBankHolidays] = useState([]); // Array of YYYY-MM-DD strings\n\n    // Helper function to check if date is a non-working day (weekend or bank holiday)\n    const isNonWorkingDay = (date) => {\n        const day = date.getDay();\n        const yyyy_mm_dd = date.toISOString().split('T')[0];\n        return day === 0 || day === 6 || bankHolidays.includes(yyyy_mm_dd);\n    };\n\n    // Helper function to get previous working day\n    const getPreviousWorkingDay = (date) => {\n        let workingDate = new Date(date);\n        do {\n            workingDate.setDate(workingDate.getDate() - 1);\n        } while (isNonWorkingDay(workingDate));\n        return workingDate;\n    };\n\n    // Helper function to get next working day\n    const getNextWorkingDay = (date) => {\n        let workingDate = new Date(date);\n        do {\n            workingDate.setDate(workingDate.getDate() + 1);\n        } while (isNonWorkingDay(workingDate));\n        return workingDate;\n    };\n\n    // Helper function to subtract working days (backwards calculation)\n    const subtractWorkingDays = (endDate, workingDaysToSubtract) => {\n        let currentDate = new Date(endDate);\n        let remainingDays = workingDaysToSubtract;\n        // Subtract working days\n        while (remainingDays > 0) {\n            currentDate.setDate(currentDate.getDate() - 1);\n            // Only count non-non-working days\n            if (!isNonWorkingDay(currentDate)) {\n                remainingDays--;\n            }\n        }\n        return currentDate;\n    };\n\n    // Helper function to add working days (forward calculation for display)\n    const addWorkingDays = (startDate, workingDaysToAdd) => {\n        if (workingDaysToAdd <= 0) {\n            return new Date(startDate);\n        }\n        let currentDate = new Date(startDate);\n        let remainingDays = workingDaysToAdd - 1;\n        while (remainingDays > 0) {\n            currentDate.setDate(currentDate.getDate() + 1);\n            if (!isNonWorkingDay(currentDate)) {\n                remainingDays--;\n            }\n        }\n        // Ensure the final day is a working day\n        while (isNonWorkingDay(currentDate)) {\n            currentDate.setDate(currentDate.getDate() + 1);\n        }\n        return currentDate;\n    };\n\n    // Load CSV data\n    useEffect(() => {\n        Papa.parse(`${window.location.origin}/Group_Asset_Task_Time.csv`, {\n            download: true,\n            header: true,\n            skipEmptyLines: true,\n            complete: (results) => {\n                const parsedData = results.data;\n                setCsvData(parsedData);\n                \n                // Extract unique asset types from CSV\n                const assetTypes = [...new Set(parsedData.map(row => row['Asset Type']))].filter(type => type);\n                setUniqueAssets(assetTypes);\n            },\n            error: (error) => {\n                console.error(\"Error parsing CSV file:\", error);\n            }\n        });\n    }, []);\n\n    // Fetch UK bank holidays for England and Wales on app load\n    useEffect(() => {\n        fetch('https://www.gov.uk/bank-holidays.json')\n            .then(response => response.json())\n            .then(data => {\n                // Get all dates for England and Wales\n                const events = data['england-and-wales'].events;\n                // Get all dates for the next 10 years\n                const now = new Date();\n                const tenYearsFromNow = new Date(now.getFullYear() + 10, now.getMonth(), now.getDate());\n                const holidayDates = events\n                    .map(event => event.date)\n                    .filter(dateStr => {\n                        const date = new Date(dateStr);\n                        return date >= now && date <= tenYearsFromNow;\n                    });\n                setBankHolidays(holidayDates);\n            })\n            .catch(err => {\n                // If fetch fails, fallback to an empty array (or you could use a static list)\n                setBankHolidays([]);\n            });\n    }, []);\n\n    // Calculate backwards timeline when live dates or assets change\n    useEffect(() => {\n        if (selectedAssets.length === 0 || csvData.length === 0) {\n            setTimelineTasks([]);\n            setCalculatedStartDates({});\n            setProjectStartDate('');\n            setDateErrors([]);\n            return;\n        }\n\n        const today = new Date();\n        today.setHours(0, 0, 0, 0); // Reset time for accurate comparison\n        \n        const newCalculatedStartDates = {};\n        const newDateErrors = [];\n        const allStartDates = [];\n        const allTasks = [];\n\n        // Loop over each selected asset instance (not just type)\n        selectedAssets.forEach(asset => {\n            // asset: { id, type, name, startDate }\n            if (!asset.startDate) return; // Skip if no start date set\n\n            // Find all tasks for this asset type from the CSV\n            const assetTasks = csvData.filter(row => row['Asset Type'] === asset.type);\n            if (assetTasks.length === 0) return;\n\n            // Use the asset instance's startDate as the go-live date\n            const liveDate = new Date(asset.startDate);\n            if (isNaN(liveDate.getTime())) return;\n\n            // We'll build the tasks in reverse (from go-live backwards)\n            let currentEndDate = new Date(liveDate);\n            const ganttTasks = [];\n            let taskIndex = 0;\n\n            // Go-live task (single day)\n            ganttTasks.unshift({\n                id: `${asset.id}-go-live`,\n                name: `${asset.name}: Go-Live`, // Use custom name\n                start: liveDate.toISOString().split('T')[0],\n                end: liveDate.toISOString().split('T')[0],\n                progress: 0,\n            });\n            taskIndex++;\n\n            // Process all other tasks in reverse order\n            for (let i = assetTasks.length - 1; i >= 0; i--) {\n                const taskInfo = assetTasks[i];\n                // Use custom duration if present, else default from CSV\n                const customDurations = assetTaskDurations[asset.id] || {};\n                const duration = customDurations[taskInfo['Task']] !== undefined\n                    ? customDurations[taskInfo['Task']]\n                    : parseInt(taskInfo['Duration (Days)'], 10) || 1;\n                // Subtract working days to get the start date\n                const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n                // Task ends the working day before currentEndDate\n                const taskEndDate = new Date(currentEndDate);\n                taskEndDate.setDate(taskEndDate.getDate() - 1);\n                // Ensure end date is a working day\n                let finalTaskEndDate = new Date(taskEndDate);\n                if (isNonWorkingDay(finalTaskEndDate)) {\n                    finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n                }\n                ganttTasks.unshift({\n                    id: `${asset.id}-task-${taskIndex}`,\n                    name: `${asset.name}: ${taskInfo['Task']}`,\n                    start: taskStartDate.toISOString().split('T')[0],\n                    end: finalTaskEndDate.toISOString().split('T')[0],\n                    progress: 0,\n                });\n                taskIndex++;\n                // Update currentEndDate for the next task\n                currentEndDate = new Date(taskStartDate);\n            }\n\n            // Add all tasks for this asset instance to the main list\n            allTasks.push(...ganttTasks);\n\n            // Set the calculated start date for this asset to the start date of the first (earliest) task\n            if (ganttTasks.length > 0 && ganttTasks[0].start) {\n                newCalculatedStartDates[asset.id] = ganttTasks[0].start;\n                allStartDates.push(new Date(ganttTasks[0].start));\n            }\n\n            // Check if start date is before today\n            if (ganttTasks.length > 0 && new Date(ganttTasks[0].start) < today) {\n                newDateErrors.push(asset.id);\n            }\n        });\n\n        // Find earliest start date across all assets\n        if (allStartDates.length > 0) {\n            const earliestDate = new Date(Math.min(...allStartDates));\n            setProjectStartDate(earliestDate.toISOString().split('T')[0]);\n        }\n\n        setTimelineTasks(allTasks);\n        setCalculatedStartDates(newCalculatedStartDates);\n        setDateErrors(newDateErrors);\n    }, [selectedAssets, globalLiveDate, useGlobalDate, assetLiveDates, csvData, assetTaskDurations]);\n// This new useEffect pre-populates individual dates when switching from global mode\n    useEffect(() => {\n        if (!useGlobalDate && globalLiveDate && selectedAssets.length > 0) {\n            const newLiveDates = { ...assetLiveDates };\n            let updated = false;\n            selectedAssets.forEach(asset => {\n                // Pre-fill only if the asset doesn't have an individual date set\n                if (!newLiveDates[asset.name]) { // Changed to asset.name\n                    newLiveDates[asset.name] = globalLiveDate; // Changed to asset.name\n                    updated = true;\n                }\n            });\n            if (updated) {\n                setAssetLiveDates(newLiveDates);\n            }\n        }\n    }, [useGlobalDate, globalLiveDate, selectedAssets, assetLiveDates]);\n\n// Sync all asset instance startDates to globalLiveDate if useGlobalDate is true\nuseEffect(() => {\n    if (useGlobalDate && globalLiveDate) {\n        setSelectedAssets(prev =>\n            prev.map(asset =>\n                asset.startDate !== globalLiveDate\n                    ? { ...asset, startDate: globalLiveDate }\n                    : asset\n            )\n        );\n    }\n    // Optionally, if unchecked, you could clear the dates or leave as-is\n}, [useGlobalDate, globalLiveDate]);\n    // Generate timeline tasks for Gantt chart\n    const generateTimelineTasks = (startDates) => {\n        if (selectedAssets.length === 0 || Object.keys(startDates).length === 0) {\n            setTimelineTasks([]);\n            return;\n        }\n\n        const allTasks = [];\n        let taskIndex = 0;\n\n        selectedAssets.forEach(asset => {\n            const assetName = asset.name; // Assuming asset object has a 'name' property\n            const assetTasks = csvData.filter(row => row['Asset Type'] === assetName);\n            if (assetTasks.length === 0) return;\n\n            // Get the correct live date for this asset\n            const liveDate = new Date(useGlobalDate ? globalLiveDate : assetLiveDates[assetName]);\n            if (isNaN(liveDate.getTime())) return;\n\n            // We'll build the tasks in reverse (from go-live backwards)\n            let currentEndDate = new Date(liveDate);\n            const ganttTasks = [];\n            let taskIndex = 0;\n\n            // Go-live task (single day)\n            ganttTasks.unshift({\n                id: `task-${taskIndex}`,\n                name: `${assetName}: Go-Live`,\n                start: liveDate.toISOString().split('T')[0],\n                end: liveDate.toISOString().split('T')[0],\n                progress: 0,\n            });\n            taskIndex++;\n\n            // Process all other tasks in reverse order\n            for (let i = assetTasks.length - 1; i >= 0; i--) {\n                const taskInfo = assetTasks[i];\n                const duration = parseInt(taskInfo['Duration (Days)'], 10) || 1;\n                // Subtract working days to get the start date\n                const taskStartDate = subtractWorkingDays(currentEndDate, duration);\n                // Task ends the working day before currentEndDate\n                const taskEndDate = new Date(currentEndDate);\n                taskEndDate.setDate(taskEndDate.getDate() - 1);\n                // Ensure end date is a working day\n                let finalTaskEndDate = new Date(taskEndDate);\n                if (isNonWorkingDay(finalTaskEndDate)) {\n                    finalTaskEndDate = getPreviousWorkingDay(finalTaskEndDate);\n                }\n                ganttTasks.unshift({\n                    id: `task-${taskIndex}`,\n                    name: `${taskInfo['Asset Type']}: ${taskInfo['Task']}`,\n                    start: taskStartDate.toISOString().split('T')[0],\n                    end: finalTaskEndDate.toISOString().split('T')[0],\n                    progress: 0,\n                });\n                taskIndex++;\n                // Update currentEndDate for the next task\n                currentEndDate = new Date(taskStartDate);\n            }\n\n            // Add all tasks for this asset to the main list\n            allTasks.push(...ganttTasks);\n\n            // Set the calculated start date for this asset to the start date of the first (earliest) task\n            if (ganttTasks.length > 0 && ganttTasks[0].start) {\n                newCalculatedStartDates[assetName] = ganttTasks[0].start;\n            }\n        });\n        setCalculatedStartDates(newCalculatedStartDates);\n    };\n\n    // Helper to generate a unique id (could use a counter or Date.now())\n    const generateAssetId = () => Date.now() + Math.random();\n\n    // Add a new asset instance\n    const handleAddAsset = (assetType) => {\n        const newAsset = {\n            id: generateAssetId(),\n            type: assetType,\n            name: assetType, // default name, can be edited later\n            startDate: useGlobalDate && globalLiveDate ? globalLiveDate : ''\n        };\n        setSelectedAssets(prev => [...prev, newAsset]);\n    };\n\n    // Remove an asset instance by id\n    const handleRemoveAsset = (assetId) => {\n        setSelectedAssets(prev => prev.filter(asset => asset.id !== assetId));\n    };\n\n    // Handler to rename an asset instance by id\n    const handleRenameAsset = (assetId, newName) => {\n        setSelectedAssets(prev =>\n            prev.map(asset =>\n                asset.id === assetId ? { ...asset, name: newName } : asset\n            )\n        );\n    };\n\n    const handleAssetLiveDateChange = (assetName, date) => {\n        setAssetLiveDates(prev => ({\n            ...prev,\n            [assetName]: date\n        }));\n    };\n\n    const handleAssetStartDateChange = (assetId, newDate) => {\n        setSelectedAssets(prev =>\n            prev.map(asset =>\n                asset.id === assetId ? { ...asset, startDate: newDate } : asset\n            )\n        );\n    };\n\n    // Handler to save custom task durations for an asset\n    const handleSaveTaskDurations = (assetId, durations) => {\n        setAssetTaskDurations(prev => ({ ...prev, [assetId]: durations }));\n    };\n\n    return (\n        <div className=\"bg-gray-100 min-h-screen font-sans\">\n            <header className=\"bg-white shadow-md\">\n                <div className=\"container mx-auto px-6 py-4\">\n                    <h1 className=\"text-3xl font-bold text-gray-800\">Accordion Timeline Builder</h1>\n                    {/* Info Box: How to Use This Timeline Builder (moved here, dismissible) */}\n                    {showInfoBox && (\n                        <div className=\"relative mb-6 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-900\">\n                            <button\n                                className=\"absolute top-2 right-2 text-blue-700 hover:text-blue-900 text-lg font-bold focus:outline-none\"\n                                onClick={() => setShowInfoBox(false)}\n                                aria-label=\"Close instructions\"\n                            >\n                                ×\n                            </button>\n                            <strong>How to Build Your Campaign Timeline:</strong>\n                            <ol className=\"list-decimal pl-5 mt-2 space-y-1\">\n                                <li>\n                                    <strong>Choose Your Campaign Start Date:</strong><br />\n                                    If all assets launch on the same day, set a global start date and check “Use same live date for all assets.”<br />\n                                    If assets launch on different days, uncheck the box and set dates individually for each asset.\n                                </li>\n                                <li>\n                                    <strong>Add Assets:</strong><br />\n                                    Click “Add” next to each asset type you need.<br />\n                                    Need the same asset type more than once? Click “Add” again and give each a unique name.\n                                </li>\n                                <li>\n                                    <strong>Customize Assets:</strong><br />\n                                    Rename each asset for clarity (e.g., “Metro Advertorial – August”).<br />\n                                    Set or confirm the start date for each asset.\n                                </li>\n                                <li>\n                                    <strong>Review Your Timeline:</strong><br />\n                                    Remove any asset you don’t need.<br />\n                                    Check the timeline to ensure all assets are scheduled as planned.\n                                </li>\n                                <li>\n                                    <strong>Adjust Your Timeline if Needed:</strong><br />\n                                    If an asset’s timeline can’t be completed by the selected start date, you’ll see a warning.<br />\n                                    – You can either change the go-live date, or<br />\n                                    – Manually shorten the durations of individual tasks (“accordion” your timeline) until the schedule fits.\n                                </li>\n                            </ol>\n                        </div>\n                    )}\n                </div>\n            </header>\n            <main className=\"container mx-auto p-6\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                    {/* LEFT COLUMN: CONTROLS */}\n                    <div\n  className=\"lg:col-span-1 bg-white p-6 rounded-xl shadow-lg overflow-x-auto\"\n  style={{ minWidth: 380 }} // You can adjust 380 to your needs\n>\n                        <h2 className=\"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\">Timeline Setup</h2>\n                        <CampaignSetup \n                            globalLiveDate={globalLiveDate}\n                            onGlobalLiveDateChange={setGlobalLiveDate}\n                            useGlobalDate={useGlobalDate}\n                            onUseGlobalDateChange={setUseGlobalDate}\n                            projectStartDate={projectStartDate}\n                            dateErrors={dateErrors}\n                        />\n<AssetSelector\n    assets={uniqueAssets || []}\n    selectedAssets={selectedAssets || []}\n    onAddAsset={handleAddAsset}\n    onRemoveAsset={handleRemoveAsset}\n    useGlobalDate={useGlobalDate}\n    globalLiveDate={globalLiveDate || ''}\n    assetLiveDates={assetLiveDates || {}}\n    onAssetLiveDateChange={handleAssetLiveDateChange}\n    calculatedStartDates={calculatedStartDates || {}}\n    dateErrors={dateErrors || []}\n    onRenameAsset={handleRenameAsset}\n    onAssetStartDateChange={handleAssetStartDateChange}\n    csvData={csvData}\n    onSaveTaskDurations={handleSaveTaskDurations}\n    isNonWorkingDay={isNonWorkingDay}\n/>\n                    </div>\n                    \n                    {/* RIGHT COLUMN: TIMELINE */}\n                    <div\n  className=\"lg:col-span-2 bg-white p-6 rounded-xl shadow-lg\"\n  style={{ minWidth: 0, maxWidth: \"100%\" }}\n>\n                        <h2 className=\"text-xl font-semibold mb-4 border-b pb-3 text-gray-700\">Generated Timeline</h2>\n                        \n                     {/* Error Messages - Temporarily Disabled */}\n{/* {dateErrors.length > 0 && (\n    <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md\">\n        <h3 className=\"text-red-800 font-medium mb-2\">⚠️ Timeline Conflicts</h3>\n        <p className=\"text-red-700 text-sm mb-2\">\n            The following assets cannot be completed by their live dates:\n        </p>\n        <ul className=\"text-red-700 text-sm\">\n            {dateErrors.map(asset => (\n                <li key={asset} className=\"ml-4\">\n                    • {asset} (would need to start on {calculatedStartDates[asset]})\n                </li>\n            ))}\n        </ul>\n        <p className=\"text-red-700 text-sm mt-2 font-medium\">\n            Manual adjustment of task durations required.\n        </p>\n    </div>\n)} */}\n\n                        {timelineTasks && timelineTasks.length > 0 ? (\n                            <GanttChart tasks={timelineTasks} />\n                        ) : (\n                            <div className=\"text-center text-gray-500 py-10\">\n                                <p className=\"text-lg\">Your timeline will appear here.</p>\n                                <p className=\"text-sm\">Set a live date and select some assets to begin.</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </main>\n        </div>\n    );\n};\n\nexport default TimelineBuilder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}